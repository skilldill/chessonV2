---
const { roomId } = Astro.params;

const mobileUrl = `https://mobile.chesson.me/${roomId}`;
const desktopUrl = `https://client.chesson.me/${roomId}`;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChessOn</title>

    <!-- запасной вариант, если JS отключён (пусть ведёт на desktop) -->
    <noscript>
      <meta http-equiv="refresh" content={`0;url=${desktopUrl}`} />
    </noscript>

    <style>
      html, body { margin: 0; height: 100%; background: #000; }
    </style>
  </head>
  <body>
    <script>
      const isMobile =
        window.innerWidth < 768 ||
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

      const mobileUrl = "{mobileUrl}";
      const desktopUrl = "{desktopUrl}";
      const target = isMobile ? mobileUrl : desktopUrl;

      // чтобы не засорять историю "переходом"
      location.replace(target);
    </script>
  </body>
</html>
